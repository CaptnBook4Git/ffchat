# Link changelog notification to fork's GitHub CHANGELOG.md

**Type:** enhancement

## Description

The application currently notifies users when a new version is installed via a snackbar notification. This notification includes a "Changelog" button intended to inform users about the latest changes, bug fixes, and new features. However, this button is currently hardcoded to point to the official FluffyChat website's changelog.

This issue proposes redirecting that link to the fork's own `CHANGELOG.md` file hosted on GitHub. This change is necessary to ensure that users receive accurate information that includes fork-specific modifications, which are marked with `[FORK]` in our repository. The upstream changelog is also frequently out of sync with the actual releases, leading to user confusion.

## Current Behavior

When an update is detected and the update snackbar appears, clicking the "Changelog" action button opens:
`https://fluffy.chat/en/changelog/`

- **File:** `lib/config/app_config.dart` (line 39)
- **Component:** `AppConfig.changelogUrl` constant is set to the upstream URL.

## Expected Behavior

Clicking the "Changelog" button should open the rendered Markdown version of the fork's changelog on GitHub:
`https://github.com/CaptnBook4Git/ffchat/blob/main/CHANGELOG.md`

## Motivation

1. **Accuracy:** The upstream website often lags behind release versions (e.g., showing v2.3 while v2.4.0 is active).
2. **Transparency:** Users of this fork need to see the changes specifically made to this version, including those tagged with `[FORK]`.
3. **Consistency:** Keeping the documentation and the application link within the same repository context improves the maintainability and reliability of the user experience.

## Codebase Analysis

### Affected Files
| File | Component | Relevance |
|------|-----------|-----------|
| `lib/config/app_config.dart` | AppConfig | PRIMARY - Contains the `changelogUrl` string constant. |
| `lib/utils/show_update_snackbar.dart` | UpdateNotifier | Secondary - Consumes the constant to launch the URL. |
| `lib/pages/chat_list/chat_list.dart` | ChatList | Secondary - Triggers the update check logic. |

### Current Implementation

In `lib/config/app_config.dart` at line 39:
```dart
static const String changelogUrl = 'https://fluffy.chat/en/changelog/';
```

In `lib/utils/show_update_snackbar.dart` at lines 27-28:
```dart
label: L10n.of(context).changelog,
onPressed: () => launchUrlString(AppConfig.changelogUrl),
```

### Dependencies

- **url_launcher**: Used to open the URL string in the system browser.
- **L10n**: Provides the translated "Changelog" label for the button.

## Upstream Status

- **Related upstream issue:** [krille-chan/fluffychat#2511 - Changelog is out of date](https://github.com/krille-chan/fluffychat/issues/2511)
- **Status:** Open. This reinforces the need for a fork-specific solution until upstream resolves their website sync issues.

## Suggested Implementation Plan

1. Open `lib/config/app_config.dart`.
2. Locate the `changelogUrl` constant at line 39.
3. Update the value to `'https://github.com/CaptnBook4Git/ffchat/blob/main/CHANGELOG.md'`.
4. Verify that no other parts of the app rely on the old URL for different purposes (none found during research).

## Acceptance Criteria

- [ ] Clicking "Changelog" in the update notification opens the fork's GitHub CHANGELOG.md.
- [ ] The URL correctly points to the `main` branch rendered view.
- [ ] Fork-specific entries (marked `[FORK]`) are clearly visible to the user in the opened page.
- [ ] AGPL headers are updated/verified on all modified files (if applicable).
- [ ] CHANGELOG.md updated with [FORK] entry for this change.

## Technical Notes

- **URL format:** We use the `/blob/main/` path rather than the `/raw/` path to ensure the user sees the formatted GitHub UI, which is more readable.
- **Branch naming:** The implementation assumes the default branch is named `main`.

## Research References

- [Matrix Spec Appendices](https://spec.matrix.org/v1.17/appendices/#common-namespaced-identifier-grammar)
- [FluffyChat Upstream Issue Tracker](https://github.com/krille-chan/fluffychat/issues)

---
*Generated by new-issue-agpl*
